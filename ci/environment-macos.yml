# Conda environment for building and testing ml-metadata on macOS
name: mlmd-dev
channels:
  - conda-forge
dependencies:
  # Note: Bazel is installed separately via official installer (conda package is unreliable)
  - setuptools<69.3  # Pin to avoid Metadata-Version 2.4 (PyPI only supports up to 2.3)
  - wheel
  - pip
  - numpy>=1.23,<2.0
  - pytest
  - pytest-cov
  - cmake=3.29  # Required for building libmysqlclient (CMake 4.x is incompatible)
  - six  # Required by ZetaSQL build tools
  - libiconv  # Required by libmysqlclient for character encoding conversions

  # C/C++ compilers
  - clang
  - clangxx

  - pip:
    - delocate  # For macOS wheel repair
